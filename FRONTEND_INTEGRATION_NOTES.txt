================================================================================
FRONTEND INTEGRATION NOTES - AI-Takeoff API
================================================================================

ISSUE: Company and Jobsite showing as "Unknown Company" / "Unknown Jobsite"

SOLUTION: The frontend needs to pass company and jobsite as query parameters
when calling the AI-Takeoff API.

================================================================================
API ENDPOINT FORMAT:
================================================================================

Current call (missing parameters):
  GET /AI-Takeoff/{google_drive_file_id}

Required call (with parameters):
  GET /AI-Takeoff/{google_drive_file_id}?company={company_name}&jobsite={jobsite_name}

================================================================================
EXAMPLE:
================================================================================

If:
  - Google Drive File ID: 1vaNBWJiZN_MxMnNEo9JuszxXX4jZ1ewG
  - Company: TTF Construction
  - Jobsite: Broadway Project

The API call should be:
  GET /AI-Takeoff/1vaNBWJiZN_MxMnNEo9JuszxXX4jZ1ewG?company=TTF%20Construction&jobsite=Broadway%20Project

Note: URL encode special characters (spaces become %20, etc.)

================================================================================
PARAMETERS:
================================================================================

| Parameter | Type   | Required | Description                    |
|-----------|--------|----------|--------------------------------|
| company   | string | No*      | Company name for the takeoff   |
| jobsite   | string | No*      | Jobsite/project name           |

* If not provided, defaults to "Unknown Company" / "Unknown Jobsite"

================================================================================
JAVASCRIPT EXAMPLE:
================================================================================

const googleDriveFileId = "1vaNBWJiZN_MxMnNEo9JuszxXX4jZ1ewG";
const company = "TTF Construction";
const jobsite = "Broadway Project";

const apiUrl = `https://your-server.com/AI-Takeoff/${googleDriveFileId}?company=${encodeURIComponent(company)}&jobsite=${encodeURIComponent(jobsite)}`;

fetch(apiUrl)
  .then(response => response.json())
  .then(data => {
    console.log("Result URL:", data.result_url);
    console.log("SVG URL:", data.svg_url);
  });

================================================================================
PHP EXAMPLE:
================================================================================

$googleDriveFileId = "1vaNBWJiZN_MxMnNEo9JuszxXX4jZ1ewG";
$company = "TTF Construction";
$jobsite = "Broadway Project";

$apiUrl = "https://your-server.com/AI-Takeoff/" . $googleDriveFileId
        . "?company=" . urlencode($company)
        . "&jobsite=" . urlencode($jobsite);

$response = file_get_contents($apiUrl);
$data = json_decode($response, true);

================================================================================
API RESPONSE:
================================================================================

Success response includes:
{
  "result_url": "https://ttfconstruction.com/ai-takeoff-results/read.php?tracking_url=XXXXX",
  "svg_url": "https://ftp-images.ttfconstruction.com/AI-takeOff/XXXXX.svg"
}

================================================================================
QUESTIONS? Contact the backend developer.
================================================================================

================================================================================
FRONTEND UPDATE LOG
================================================================================

[2026-01-05] - Frontend Developer (Claude)
-----------------------------------------
âœ… COMPLETED: Updated pdf-upload.tsx to pass company and jobsite parameters

File modified: /pdf-dashboard/components/pdf-upload.tsx
Line ~159: Added query parameters to AI-Takeoff API call

Before:
  `${apiUrl}/AI-Takeoff/${uploadResult.id}`

After:
  `${apiUrl}/AI-Takeoff/${uploadResult.id}?company=${encodeURIComponent(selectedCompany)}&jobsite=${encodeURIComponent(selectedJobsite)}`

The selectedCompany and selectedJobsite values come from the CompanyJobsiteSelector
component and are validated before the API call (lines 100-103).

Ready for testing!

================================================================================
